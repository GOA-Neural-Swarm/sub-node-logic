name: Cluster Sub-node Sync

on:
  schedule:
    - cron: '*/15 * * * *' # áá… á€™á€­á€”á€…á€ºá€á€…á€ºá€á€« á€¡á€œá€­á€¯á€¡á€œá€»á€±á€¬á€€á€º á€•á€½á€¬á€¸/á€…á€…á€ºá€†á€±á€¸á€™á€Šá€º
  workflow_dispatch:      # Manual á€”á€¾á€­á€¯á€¸á€á€»á€„á€ºá€›á€„á€ºá€œá€Šá€ºá€¸ á€›á€á€Šá€º

# ğŸ› ï¸ Permissions á€¡á€†á€„á€·á€ºá€™á€¼á€¾á€„á€·á€ºá€á€„á€ºá€á€¼á€„á€ºá€¸ - GitHub á€†á€® á€–á€­á€¯á€„á€ºá€›á€±á€¸á€á€½á€„á€·á€º á€¡á€•á€¼á€Šá€·á€ºá€¡á€á€•á€±á€¸á€á€Šá€º
permissions:
  contents: write
  pages: write
  id-token: write
  actions: write

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository Code
        uses: actions/checkout@v4

      - name: Setup Node.js Environment
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      # ğŸ› ï¸ Dependencies á€¡á€¬á€¸á€œá€¯á€¶á€¸á€€á€­á€¯ Trinity Core á€”á€¾á€„á€·á€º Match á€–á€¼á€…á€ºá€¡á€±á€¬á€„á€º á€á€½á€„á€ºá€¸á€á€¼á€„á€ºá€¸
      - name: Install Dependencies
        run: |
          npm install @octokit/rest firebase-admin axios @supabase/supabase-js pg

      # ğŸš€ Swarm Logic á€€á€­á€¯ á€œá€­á€¯á€¡á€•á€ºá€á€²á€· Environment Variables á€¡á€¬á€¸á€œá€¯á€¶á€¸á€”á€²á€· Run á€á€¼á€„á€ºá€¸
      - name: Execute Swarm Logic
        run: node cluster_sync.js
        env:
          # Database & Firebase Keys (Sudo Access Mode)
          NEON_KEY: ${{ secrets.NEON_KEY }}
          SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
          SUPABASE_SERVICE_ROLE_KEY: ${{ secrets.SUPABASE_SERVICE_ROLE_KEY }}
          FIREBASE_KEY: ${{ secrets.FIREBASE_KEY }}

          # GitHub Authentication Tokens
          GH_TOKEN: ${{ secrets.GH_TOKEN }}
          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}

# [Natural Order] Status: Synchronized & Shielded ğŸ”±
